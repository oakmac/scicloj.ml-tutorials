<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/sandstone/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/solarized-light.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-grid.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-theme-balham.min.css" rel="stylesheet" type="text/css">
        <link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    </head>
    <body>
        <p id="loading">Loading ...</p>
        <div id="app"></div>
    </body>
    <script id="state" type="text">"{:options {:reverse-notes? false, :header? false, :notes-in-cards? false, :initially-collapse? false, :auto-scroll? false, :port 1903, :custom-header [:div {:style {:font-style \"italic\", :font-family \"\\\"Lucida Console\\\", Courier, monospace\"}} \"(notespace)\" [:p \"Mon Jun 20 14:23:40 CEST 2022\"] nil [:hr]], :custom-footer [:div [:hr] [:hr]]}, :ids [\"132\" \"159\" \"90\" \"134\" \"135\" \"93\" \"160\" \"95\" \"96\" \"97\" \"161\" \"162\" \"163\" \"164\" \"165\" \"166\" \"167\" \"168\" \"169\" \"170\" \"171\" \"172\" \"148\" \"173\" \"174\" \"175\" \"176\" \"177\" \"178\" \"155\" \"179\" \"157\"], :id->content {\"93\" [:div [:p] nil nil [:p/markdown \"First we load the data:\"]], \"157\" [:div [:p] nil nil [:p/markdown \"RMSE and R2 of the intercation model are sligtly better.\\nThese results suggest that the model with the interaction term is better than the model that contains only main effects.\\nSo, for this specific data, we should go for the model with the interaction model.\\n\"]], \"175\" [:div [:p] [:div [:p/code {:code \"^kind/hiccup\\n(text->hiccup\\n (str\\n  (-> evaluations flatten first :fit-ctx :model ml/thaw-model str)))\", :bg-class \"bg-light\"}]] nil (\"Linear Model:\" [:br] \"\" [:br] \"Residuals:\" [:br] \"       Min          1Q      Median          3Q         Max\" [:br] \"   -4.7198     -0.5571      0.2279      0.7265      1.7631\" [:br] \"\" [:br] \"Coefficients:\" [:br] \"                  Estimate Std. Error    t value   Pr(>|t|)\" [:br] \"Intercept           7.8323     0.3194    24.5216     0.0000 ***\" [:br] \"youtube             0.0197     0.0016    12.3197     0.0000 ***\" [:br] \"facebook            0.0410     0.0097     4.2202     0.0000 ***\" [:br] \"youtube*facebook     0.0009     0.0000    17.8680     0.0000 ***\" [:br] \"---------------------------------------------------------------------\" [:br] \"Significance codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\" [:br] \"\" [:br] \"Residual standard error: 1.0545 on 129 degrees of freedom\" [:br] \"Multiple R-squared: 0.9689,    Adjusted R-squared: 0.9682\" [:br] \"F-statistic: 1340.7554 on 4 and 129 DF,  p-value: 5.169e-97\")], \"155\" [:div [:p] nil nil [:p/markdown \"R2\"]], \"135\" [:div [:p] [:div [:p/code {:code \"(defn pp-str [x]\\n  (with-out-str (clojure.pprint/pprint x)))\", :bg-class \"bg-light\"}]] nil nil], \"169\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :other-metrices first :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"0.8955176888694834\\n\"}]], \"179\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :other-metrices first :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"0.9630498727360517\\n\"}]], \"96\" [:div [:p] nil nil [:p/markdown \"Firts we build an additiv model, which model equatio is 'sales = b0 + b1*youtube + b2*facebook'\"]], \"159\" [:div [:p] [:div [:p/code {:code \"(comment\\n  (note/init-with-browser)\\n  (note/eval-this-notespace)\\n  (note/render-static-html \\\"docs/userguide-models.html\\\"))\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"nil\\n\"}]], \"162\" [:div [:p] [:div [:p/code {:code \"(def evaluations\\n  (ml/evaluate-pipelines\\n   [additive-pipeline]\\n   (ds/split->seq marketing :holdout)\\n   ml/rmse\\n   :loss\\n   {:other-metrices [{:name :r2\\n                      :metric-fn fmstats/r2-determination}]}))\", :bg-class \"bg-light\"}]] nil nil], \"167\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"2.203614042165717\\n\"}]], \"172\" [:div [:p] [:div [:p/code {:code \"(def pipe-interaction\\n  (ml/pipeline\\n   (mm/drop-columns [:newspaper])\\n   (mm/add-column :youtube*facebook (fn [ds] (dtf/* (ds :youtube) (ds :facebook))))\\n   (mm/set-inference-target :sales)\\n   {:metamorph/id :model}(mm/model {:model-type :smile.regression/ordinary-least-square})))\", :bg-class \"bg-light\"}]] nil nil], \"176\" [:div [:p] nil nil [:p/markdown \"As the multiplcation of 'youtube*facebook' is as well statistically relevant, it\\nsuggests that there is indeed an interaction between these 2 predictor variables youtube and facebook.\"]], \"173\" [:div [:p] [:div [:p/code {:code \"(def evaluations\\n  (ml/evaluate-pipelines\\n   [pipe-interaction]\\n   (ds/split->seq marketing :holdout)\\n   ml/rmse\\n   :loss\\n   {:other-metrices [{:name :r2\\n                      :metric-fn fmstats/r2-determination}]}))\", :bg-class \"bg-light\"}]] nil nil], \"90\" [:div [:p] nil nil [:p/markdown \"This examples how, how to do interactions in linear regression with `scicloj.ml`\"]], \"148\" [:div [:p] nil nil [:p/markdown \"Agin we evaluate the model,\"]], \"166\" [:div [:p] nil nil [:p/markdown \"RMSE\"]], \"168\" [:div [:p] nil nil [:p/markdown \"R2\"]], \"97\" [:div [:p] [:div [:p/code {:code \"(def additive-pipeline\\n  (ml/pipeline\\n   (mm/set-inference-target :sales)\\n   (mm/drop-columns [:newspaper])\\n   {:metamorph/id :model}\\n   (mm/model {:model-type :smile.regression/ordinary-least-square})))\", :bg-class \"bg-light\"}]] nil nil], \"174\" [:div [:p] nil nil [:p/markdown \"and print it and the performance metrices:\"]], \"171\" [:div [:p] nil nil [:p/markdown \"Know we add interaction effects to it, resulting in this model equation: 'sales = b0 + b1*youtube + b2*facebook + b3*(youtube*facebook)'\"]], \"134\" [:div [:p] nil nil [:p/markdown \"Taking ideas from: \\nhttp://www.sthda.com/english/articles/40-regression-analysis/164-interaction-effect-in-multiple-regression-essentials/#comments-list\"]], \"177\" [:div [:p] nil nil [:p/markdown \"RMSE\"]], \"95\" [:div [:p] nil nil [:p/markdown \"## Additive model\"]], \"165\" [:div [:p] nil nil [:p/markdown \"We have the following metrices:\"]], \"178\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"1.2915463808935799\\n\"}]], \"170\" [:div [:p] nil nil [:p/markdown \"## Interaction effects\"]], \"161\" [:div [:p] nil nil [:p/markdown \"We evaluate it, \"]], \"164\" [:div [:p] [:div [:p/code {:code \"^kind/hiccup\\n(text->hiccup\\n (str\\n  (-> evaluations flatten first :fit-ctx :model ml/thaw-model str)))\", :bg-class \"bg-light\"}]] nil (\"Linear Model:\" [:br] \"\" [:br] \"Residuals:\" [:br] \"       Min          1Q      Median          3Q         Max\" [:br] \"   -6.4828     -0.9805      0.3129      1.4686      3.2026\" [:br] \"\" [:br] \"Coefficients:\" [:br] \"                  Estimate Std. Error    t value   Pr(>|t|)\" [:br] \"Intercept           3.9658     0.4036     9.8264     0.0000 ***\" [:br] \"youtube             0.0438     0.0016    27.8044     0.0000 ***\" [:br] \"facebook            0.1823     0.0095    19.1115     0.0000 ***\" [:br] \"---------------------------------------------------------------------\" [:br] \"Significance codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\" [:br] \"\" [:br] \"Residual standard error: 1.9357 on 130 degrees of freedom\" [:br] \"Multiple R-squared: 0.9021,    Adjusted R-squared: 0.9006\" [:br] \"F-statistic: 599.0831 on 3 and 130 DF,  p-value: 2.483e-66\")], \"163\" [:div [:p] nil nil [:p/markdown \"and print the result:\"]], \"160\" [:div [:p] [:div [:p/code {:code \"(def marketing (tc/dataset \\\"data/marketing.csv\\\" {:key-fn keyword}))\", :bg-class \"bg-light\"}]] nil nil], \"132\" [:div [:p] [:div [:p/code {:code \"(require '[scicloj.ml.core :as ml]\\n         '[scicloj.ml.metamorph :as mm]\\n         '[scicloj.ml.dataset :refer [dataset add-column]]\\n         '[scicloj.ml.dataset :as ds]\\n         '[tech.v3.dataset.math :as std-math]\\n         '[tech.v3.datatype.functional :as dtf]\\n         '[scicloj.metamorph.ml.toydata :as datasets])\", :bg-class \"bg-light\"}]] nil nil]}}"</script>
    <script src="gorilla-notes/js/compiled/main.js"></script>
</html>
