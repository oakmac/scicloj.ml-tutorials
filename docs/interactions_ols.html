<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/sandstone/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/solarized-light.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-grid.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-theme-balham.min.css" rel="stylesheet" type="text/css">
        <link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    </head>
    <body>
        <p id="loading">Loading ...</p>
        <div id="app"></div>
    </body>
    <script id="state" type="text">"{:options {:reverse-notes? false, :header? false, :notes-in-cards? false, :initially-collapse? false, :auto-scroll? false, :port 5678, :custom-header [:div {:style {:font-style \"italic\", :font-family \"\\\"Lucida Console\\\", Courier, monospace\"}} \"(notespace)\" [:p \"Sun Dec 18 23:06:37 CET 2022\"] nil [:hr]], :custom-footer [:div [:hr] [:hr]]}, :ids [\"1901\" \"1903\" \"1905\" \"1907\" \"1909\" \"1911\" \"1913\" \"1915\" \"1917\" \"1919\" \"1921\" \"1923\" \"1925\" \"1927\" \"1929\" \"1931\" \"1933\" \"1935\" \"1937\" \"1939\" \"1941\" \"1943\" \"1945\" \"1947\" \"1949\" \"1951\" \"1953\" \"1955\" \"1957\" \"1959\" \"1961\" \"1963\"], :id->content {\"1927\" [:div [:p] [:div [:p/code {:code \"^kind/hiccup\\n(text->hiccup\\n (str\\n  (-> evaluations flatten first :fit-ctx :model ml/thaw-model str)))\", :bg-class \"bg-light\"}]] nil (\"Linear Model:\" [:br] \"\" [:br] \"Residuals:\" [:br] \"       Min          1Q      Median          3Q         Max\" [:br] \"  -10.3247     -0.9343      0.2915      1.3946      3.5276\" [:br] \"\" [:br] \"Coefficients:\" [:br] \"                  Estimate Std. Error    t value   Pr(>|t|)\" [:br] \"Intercept           3.3005     0.4677     7.0571     0.0000 ***\" [:br] \"youtube             0.0465     0.0018    25.9393     0.0000 ***\" [:br] \"facebook            0.1874     0.0102    18.3887     0.0000 ***\" [:br] \"---------------------------------------------------------------------\" [:br] \"Significance codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\" [:br] \"\" [:br] \"Residual standard error: 2.0841 on 130 degrees of freedom\" [:br] \"Multiple R-squared: 0.8820,    Adjusted R-squared: 0.8802\" [:br] \"F-statistic: 485.7103 on 3 and 130 DF,  p-value: 4.779e-61\")], \"1919\" [:div [:p] [:div [:p/code {:code \"(def additive-pipeline\\n  (ml/pipeline\\n   (mm/set-inference-target :sales)\\n   (mm/drop-columns [:newspaper])\\n   {:metamorph/id :model}\\n   (mm/model {:model-type :smile.regression/ordinary-least-square})))\", :bg-class \"bg-light\"}]] nil nil], \"1959\" [:div [:p] nil nil [:p/markdown \"R2\"]], \"1903\" [:div [:p] [:div [:p/code {:code \"(comment\\n  (note/init-with-browser)\\n  (note/eval-this-notespace)\\n  (note/render-static-html \\\"docs/interactions_ols.html\\\"))\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"nil\\n\"}]], \"1915\" [:div [:p] nil nil [:p/markdown \"## Additive model\"]], \"1913\" [:div [:p] [:div [:p/code {:code \"(def marketing (tc/dataset \\\"data/marketing.csv\\\" {:key-fn keyword}))\", :bg-class \"bg-light\"}]] nil nil], \"1935\" [:div [:p] nil nil [:p/markdown \"R2\"]], \"1951\" [:div [:p] [:div [:p/code {:code \"^kind/hiccup\\n(text->hiccup\\n (str\\n  (-> evaluations flatten first :fit-ctx :model ml/thaw-model str)))\", :bg-class \"bg-light\"}]] nil (\"Linear Model:\" [:br] \"\" [:br] \"Residuals:\" [:br] \"       Min          1Q      Median          3Q         Max\" [:br] \"   -4.7095     -0.5127      0.2689      0.7024      1.7420\" [:br] \"\" [:br] \"Coefficients:\" [:br] \"                  Estimate Std. Error    t value   Pr(>|t|)\" [:br] \"Intercept           7.8902     0.3451    22.8622     0.0000 ***\" [:br] \"youtube             0.0198     0.0017    11.3441     0.0000 ***\" [:br] \"facebook            0.0360     0.0105     3.4386     0.0008 ***\" [:br] \"youtube*facebook     0.0009     0.0001    17.0549     0.0000 ***\" [:br] \"---------------------------------------------------------------------\" [:br] \"Significance codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\" [:br] \"\" [:br] \"Residual standard error: 1.0675 on 129 degrees of freedom\" [:br] \"Multiple R-squared: 0.9690,    Adjusted R-squared: 0.9683\" [:br] \"F-statistic: 1344.4565 on 4 and 129 DF,  p-value: 4.351e-97\")], \"1921\" [:div [:p] nil nil [:p/markdown \"We evaluate it, \"]], \"1941\" [:div [:p] nil nil [:p/markdown \"Now we add interaction effects to it, resulting in this model equation: 'sales = b0 + b1 * youtube + b2 * facebook + b3 * (youtube * facebook)'\"]], \"1923\" [:div [:p] [:div [:p/code {:code \"(def evaluations\\n  (ml/evaluate-pipelines\\n   [additive-pipeline]\\n   (ds/split->seq marketing :holdout)\\n   ml/rmse\\n   :loss\\n   {:other-metrices [{:name :r2\\n                      :metric-fn fmstats/r2-determination}]}))\", :bg-class \"bg-light\"}]] nil nil], \"1949\" [:div [:p] nil nil [:p/markdown \"and print it and the performance metrices:\"]], \"1907\" [:div [:p] nil nil [:p/markdown \"Taking ideas from: \\nhttp://www.sthda.com/english/articles/40-regression-analysis/164-interaction-effect-in-multiple-regression-essentials/#comments-list\"]], \"1945\" [:div [:p] nil nil [:p/markdown \"Again we evaluate the model,\"]], \"1963\" [:div [:p] nil nil [:p/markdown \"RMSE and R2 of the intercation model are sligtly better.\\nThese results suggest that the model with the interaction term is better than the model that contains only main effects.\\nSo, for this specific data, we should go for the model with the interaction model.\\n\"]], \"1955\" [:div [:p] nil nil [:p/markdown \"RMSE\"]], \"1961\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :other-metrices first :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"0.9658042136068352\\n\"}]], \"1933\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"1.893659740226576\\n\"}]], \"1909\" [:div [:p] [:div [:p/code {:code \"(defn pp-str [x]\\n  (with-out-str (clojure.pprint/pprint x)))\", :bg-class \"bg-light\"}]] nil nil], \"1943\" [:div [:p] [:div [:p/code {:code \"(def pipe-interaction\\n  (ml/pipeline\\n   (mm/drop-columns [:newspaper])\\n   (mm/add-column :youtube*facebook (fn [ds] (dtf/* (ds :youtube) (ds :facebook))))\\n   (mm/set-inference-target :sales)\\n   {:metamorph/id :model}(mm/model {:model-type :smile.regression/ordinary-least-square})))\", :bg-class \"bg-light\"}]] nil nil], \"1905\" [:div [:p] nil nil [:p/markdown \"This examples how, how to do interactions in linear regression with `scicloj.ml`\"]], \"1939\" [:div [:p] nil nil [:p/markdown \"## Interaction effects\"]], \"1901\" [:div [:p] [:div [:p/code {:code \"(require '[scicloj.ml.core :as ml]\\n         '[scicloj.ml.metamorph :as mm]\\n         '[scicloj.ml.dataset :refer [dataset add-column]]\\n         '[scicloj.ml.dataset :as ds]\\n         '[tech.v3.dataset.math :as std-math]\\n         '[tech.v3.datatype.functional :as dtf]\\n         '[scicloj.metamorph.ml.toydata :as datasets])\", :bg-class \"bg-light\"}]] nil nil], \"1929\" [:div [:p] nil nil [:p/markdown \"We have the following metrices:\"]], \"1917\" [:div [:p] nil nil [:p/markdown \"Firts we build an additive model, which model equation is 'sales = b0 + b1 * youtube + b2 * facebook'\"]], \"1957\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"1.262510636783429\\n\"}]], \"1947\" [:div [:p] [:div [:p/code {:code \"(def evaluations\\n  (ml/evaluate-pipelines\\n   [pipe-interaction]\\n   (ds/split->seq marketing :holdout)\\n   ml/rmse\\n   :loss\\n   {:other-metrices [{:name :r2\\n                      :metric-fn fmstats/r2-determination}]}))\", :bg-class \"bg-light\"}]] nil nil], \"1925\" [:div [:p] nil nil [:p/markdown \"and print the result:\"]], \"1911\" [:div [:p] nil nil [:p/markdown \"First we load the data:\"]], \"1937\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :other-metrices first :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"0.9223338617254309\\n\"}]], \"1931\" [:div [:p] nil nil [:p/markdown \"RMSE\"]], \"1953\" [:div [:p] nil nil [:p/markdown \"As the multiplcation of 'youtube * facebook' is as well statistically relevant, it\\nsuggests that there is indeed an interaction between these 2 predictor variables youtube and facebook.\"]]}}"</script>
    <script src="gorilla-notes/js/compiled/main.js"></script>
</html>
