<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/sandstone/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/solarized-light.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-grid.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/24.0.0/styles/ag-theme-balham.min.css" rel="stylesheet" type="text/css">
        <link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    </head>
    <body>
        <p id="loading">Loading ...</p>
        <div id="app"></div>
    </body>
    <script id="state" type="text">"{:options {:reverse-notes? false, :header? false, :notes-in-cards? false, :initially-collapse? false, :auto-scroll? false, :port 1903, :custom-header [:div {:style {:font-style \"italic\", :font-family \"\\\"Lucida Console\\\", Courier, monospace\"}} \"(notespace)\" [:p \"Mon Jun 20 14:32:55 CEST 2022\"] nil [:hr]], :custom-footer [:div [:hr] [:hr]]}, :ids [\"132\" \"212\" \"90\" \"213\" \"237\" \"215\" \"238\" \"95\" \"239\" \"217\" \"161\" \"240\" \"241\" \"242\" \"192\" \"243\" \"244\" \"195\" \"245\" \"246\" \"225\" \"247\" \"248\" \"249\" \"229\" \"250\" \"231\" \"205\" \"251\" \"233\" \"252\" \"253\"], :id->content {\"253\" [:div [:p] nil nil [:p/markdown \"RMSE and R2 of the intercation model are sligtly better.\\nThese results suggest that the model with the interaction term is better than the model that contains only main effects.\\nSo, for this specific data, we should go for the model with the interaction model.\\n\"]], \"195\" [:div [:p] nil nil [:p/markdown \"R2\"]], \"237\" [:div [:p] [:div [:p/code {:code \"(defn pp-str [x]\\n  (with-out-str (clojure.pprint/pprint x)))\", :bg-class \"bg-light\"}]] nil nil], \"238\" [:div [:p] [:div [:p/code {:code \"(def marketing (tc/dataset \\\"data/marketing.csv\\\" {:key-fn keyword}))\", :bg-class \"bg-light\"}]] nil nil], \"231\" [:div [:p] nil nil [:p/markdown \"As the multiplcation of 'youtube * facebook' is as well statistically relevant, it\\nsuggests that there is indeed an interaction between these 2 predictor variables youtube and facebook.\"]], \"251\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"0.935379556901947\\n\"}]], \"192\" [:div [:p] nil nil [:p/markdown \"We have the following metrices:\"]], \"213\" [:div [:p] nil nil [:p/markdown \"Taking ideas from: \\nhttp://www.sthda.com/english/articles/40-regression-analysis/164-interaction-effect-in-multiple-regression-essentials/#comments-list\"]], \"249\" [:div [:p] [:div [:p/code {:code \"(def evaluations\\n  (ml/evaluate-pipelines\\n   [pipe-interaction]\\n   (ds/split->seq marketing :holdout)\\n   ml/rmse\\n   :loss\\n   {:other-metrices [{:name :r2\\n                      :metric-fn fmstats/r2-determination}]}))\", :bg-class \"bg-light\"}]] nil nil], \"244\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"1.9394426780798846\\n\"}]], \"225\" [:div [:p] nil nil [:p/markdown \"Now we add interaction effects to it, resulting in this model equation: 'sales = b0 + b1 * youtube + b2 * facebook + b3 * (youtube * facebook)'\"]], \"247\" [:div [:p] [:div [:p/code {:code \"(def pipe-interaction\\n  (ml/pipeline\\n   (mm/drop-columns [:newspaper])\\n   (mm/add-column :youtube*facebook (fn [ds] (dtf/* (ds :youtube) (ds :facebook))))\\n   (mm/set-inference-target :sales)\\n   {:metamorph/id :model}(mm/model {:model-type :smile.regression/ordinary-least-square})))\", :bg-class \"bg-light\"}]] nil nil], \"212\" [:div [:p] [:div [:p/code {:code \"(comment\\n  (note/init-with-browser)\\n  (note/eval-this-notespace)\\n  (note/render-static-html \\\"docs/interactions_ols.html\\\"))\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"nil\\n\"}]], \"246\" [:div [:p] nil nil [:p/markdown \"## Interaction effects\"]], \"90\" [:div [:p] nil nil [:p/markdown \"This examples how, how to do interactions in linear regression with `scicloj.ml`\"]], \"250\" [:div [:p] [:div [:p/code {:code \"^kind/hiccup\\n(text->hiccup\\n (str\\n  (-> evaluations flatten first :fit-ctx :model ml/thaw-model str)))\", :bg-class \"bg-light\"}]] nil (\"Linear Model:\" [:br] \"\" [:br] \"Residuals:\" [:br] \"       Min          1Q      Median          3Q         Max\" [:br] \"   -7.7245     -0.4814      0.2935      0.7492      1.7121\" [:br] \"\" [:br] \"Coefficients:\" [:br] \"                  Estimate Std. Error    t value   Pr(>|t|)\" [:br] \"Intercept           7.8913     0.3867    20.4051     0.0000 ***\" [:br] \"youtube             0.0196     0.0020     9.9728     0.0000 ***\" [:br] \"facebook            0.0358     0.0116     3.0864     0.0025 **\" [:br] \"youtube*facebook     0.0009     0.0001    15.4475     0.0000 ***\" [:br] \"---------------------------------------------------------------------\" [:br] \"Significance codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\" [:br] \"\" [:br] \"Residual standard error: 1.2258 on 129 degrees of freedom\" [:br] \"Multiple R-squared: 0.9641,    Adjusted R-squared: 0.9632\" [:br] \"F-statistic: 1153.6477 on 4 and 129 DF,  p-value: 6.051e-93\")], \"241\" [:div [:p] nil nil [:p/markdown \"and print the result:\"]], \"239\" [:div [:p] nil nil [:p/markdown \"Firts we build an additive model, which model equation is 'sales = b0 + b1 * youtube + b2 * facebook'\"]], \"240\" [:div [:p] [:div [:p/code {:code \"(def evaluations\\n  (ml/evaluate-pipelines\\n   [additive-pipeline]\\n   (ds/split->seq marketing :holdout)\\n   ml/rmse\\n   :loss\\n   {:other-metrices [{:name :r2\\n                      :metric-fn fmstats/r2-determination}]}))\", :bg-class \"bg-light\"}]] nil nil], \"205\" [:div [:p] nil nil [:p/markdown \"RMSE\"]], \"229\" [:div [:p] nil nil [:p/markdown \"and print it and the performance metrices:\"]], \"217\" [:div [:p] [:div [:p/code {:code \"(def additive-pipeline\\n  (ml/pipeline\\n   (mm/set-inference-target :sales)\\n   (mm/drop-columns [:newspaper])\\n   {:metamorph/id :model}\\n   (mm/model {:model-type :smile.regression/ordinary-least-square})))\", :bg-class \"bg-light\"}]] nil nil], \"95\" [:div [:p] nil nil [:p/markdown \"## Additive model\"]], \"252\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :other-metrices first :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"0.9759113387689377\\n\"}]], \"233\" [:div [:p] nil nil [:p/markdown \"R2\"]], \"245\" [:div [:p] [:div [:p/code {:code \"(-> evaluations flatten first :test-transform :other-metrices first :metric)\", :bg-class \"bg-light\"}]] nil [:p/code {:code \"0.8926956955526542\\n\"}]], \"248\" [:div [:p] nil nil [:p/markdown \"Agin we evaluate the model,\"]], \"161\" [:div [:p] nil nil [:p/markdown \"We evaluate it, \"]], \"242\" [:div [:p] [:div [:p/code {:code \"^kind/hiccup\\n(text->hiccup\\n (str\\n  (-> evaluations flatten first :fit-ctx :model ml/thaw-model str)))\", :bg-class \"bg-light\"}]] nil (\"Linear Model:\" [:br] \"\" [:br] \"Residuals:\" [:br] \"       Min          1Q      Median          3Q         Max\" [:br] \"  -10.3038     -0.8557      0.2868      1.4062      3.3862\" [:br] \"\" [:br] \"Coefficients:\" [:br] \"                  Estimate Std. Error    t value   Pr(>|t|)\" [:br] \"Intercept           3.4188     0.4386     7.7942     0.0000 ***\" [:br] \"youtube             0.0473     0.0018    26.1462     0.0000 ***\" [:br] \"facebook            0.1845     0.0102    18.1231     0.0000 ***\" [:br] \"---------------------------------------------------------------------\" [:br] \"Significance codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\" [:br] \"\" [:br] \"Residual standard error: 2.0698 on 130 degrees of freedom\" [:br] \"Multiple R-squared: 0.8994,    Adjusted R-squared: 0.8979\" [:br] \"F-statistic: 581.2556 on 3 and 130 DF,  p-value: 1.456e-65\")], \"215\" [:div [:p] nil nil [:p/markdown \"First we load the data:\"]], \"243\" [:div [:p] nil nil [:p/markdown \"RMSE\"]], \"132\" [:div [:p] [:div [:p/code {:code \"(require '[scicloj.ml.core :as ml]\\n         '[scicloj.ml.metamorph :as mm]\\n         '[scicloj.ml.dataset :refer [dataset add-column]]\\n         '[scicloj.ml.dataset :as ds]\\n         '[tech.v3.dataset.math :as std-math]\\n         '[tech.v3.datatype.functional :as dtf]\\n         '[scicloj.metamorph.ml.toydata :as datasets])\", :bg-class \"bg-light\"}]] nil nil]}}"</script>
    <script src="gorilla-notes/js/compiled/main.js"></script>
</html>
